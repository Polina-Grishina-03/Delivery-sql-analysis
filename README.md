# Комплексный анализ сервиса доставки продуктов в PostgreSQL

В данном блоке представлены мои решения задач по следующим темам:
* **Агрегация данных**
* **Группировка данных**
* **Подзапросы**
* **Join**
* **Оконные функции**

*Для удобства интерпретации SQL запросы, описание задач и пояснения объединены в файлах jupyter notebook.*

## Описание:
Проект посвящён всестороннему анализу функционирования сервиса по доставке продуктов — от пользовательских заказов до логистики курьерской службы. Маркетплейс предоставляет пользователям возможность заказывать продукты через мобильное приложение или веб‑интерфейс. Заказы обрабатываются системой и доставляются курьерами. В основе — реляционная база данных, схема которой представлена ниже.

## Цель:
Разработать набор SQL‑запросов для целостного понимания работы сервиса:
* как пользователи взаимодействуют с платформой;
* как формируется и обрабатывается поток заказов;
* как организована работа курьерской службы;
* какие узкие места и точки роста видны в текущих процессах.

## Схема базы данных:
![Database Schema](https://github.com/Polina-Grishina-03/Delivery-sql-analysis/blob/main/Database%20Schema.jpg)

## Структура и наполнение таблиц:
**user_actions** — действия пользователей с заказами
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| user_id |	INT	| id пользователя |
| order_id | INT | id заказа |
| action	| VARCHAR(50)	| действие пользователя с заказом: 'create_order' — создание заказа, 'cancel_order' — отмена заказа |
| time	| TIMESTAMP	| время совершения действия |

**courier_actions** — действия курьеров с заказами
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| courier_id |	INT	| id курьера |
| order_id | INT | id заказа |
| action	| VARCHAR(50)	| действие курьера с заказом; 'accept_order' — принятие заказа, 'deliver_order' — доставка заказа |
| time	| TIMESTAMP	| время совершения действия |

**orders** — информация о заказах
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| order_id | INT | id заказа |
| creation_time	| TIMESTAMP	| время создания заказа |
| product_ids	| INTEGER[]	| список id товаров в заказе |

**users** — информация о пользователях
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| user_id |	INT	| id пользователя |
| birth_date | DATE | дата рождения |
| sex	| VARCHAR(50)	| пол; 'male' — мужской, 'female' — женский |

**couriers** — информация о курьерах
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| courier_id |	INT	| id курьера |
| birth_date | DATE | дата рождения |
| sex	| VARCHAR(50)	| пол; 'male' — мужской, 'female' — женский |

**products** — информация о товарах, которые доставляет сервис
| Столбец | Тип данных| Описание|
|----------|--------|-----------|
| product_id | INT | id продукта |
| name | VARCHAR(50)	| название товара |
| price	| NUMERIC(5)	| цена товара |

## Результат:
Получен инструментарий для:
* оперативного мониторинга состояния сервиса;
* выявления закономерностей в поведении пользователей;
* анализа эффективности логистики;
* поддержки управленческих решений на основе данных.

## Значение для бизнеса:
Проект позволяет:
* видеть «полную картину» работы сервиса в едином информационном поле;
* оперативно реагировать на изменения в пользовательской активности и логистике;
* формировать гипотезы для оптимизации процессов без привлечения внешних аналитиков.
